#!/bin/sh
# https://gist.github.com/erlepereira/c11f4f7a3f60cd2071e79018e895fc8a#file-dnsmasq-antimalware
# Choose from here https://github.com/StevenBlack/hosts
HOSTS_RAW=https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts
# HOSTS_RAW=https://raw.githubusercontent.com/StevenBlack/hosts/master/alternates/fakenews-gambling/hosts
TMP_LOCATION=/tmp

wget $HOSTS_RAW -P $TMP_LOCATION

awk '$1 == "0.0.0.0"  { print "address=/"$2"/0.0.0.0/"}' $TMP_LOCATION/hosts  > /etc/dnsmasq.d/malware.conf

#for ipv6 support uncomment below
#awk '$1 == "0.0.0.0"  { print "address=/"$2"/::1/"}' $TMP_LOCATION/hosts > /etc/dnsmasq.d/malware-ipv6.conf

#clean up!
rm $TMP_LOCATION/hosts
